---
export const prerender = false; // ðŸš¨ Esto indica que se renderiza en cada peticiÃ³n

import MainLayout from "../../layouts/MainLayout.astro";
import { getProjectBySlug, getProyectos } from "../../lib/api";

export async function getStaticPaths() {
  const proyectos = await getProyectos();

  return proyectos.map((proyecto) => ({
    params: { slug: proyecto.slug },
  }));
}
const { slug } = Astro.params;
let proyecto = null;
try {
  proyecto = await getProjectBySlug(slug);
} catch (error) {
  console.error("Error fetching project:", error);
}
---
<MainLayout>
    {proyecto ? (
      <div class="p-4">
        <h1 class="text-3xl font-bold mb-4">{proyecto.titulo}</h1>
        <p class="mb-2">{proyecto.descripcion}</p>
        <div class="text-sm text-gray-400">Slug: {slug}</div>
      </div>
    ) : (
      <div class="p-4 text-red-600">No se pudo cargar el proyecto.</div>
    )}
  </MainLayout>
